<div class="glossary-checklist">
  <div class="provider-filter">
    <h3 class="filter-title">Choose Your AI Platforms</h3>
    <p class="filter-subtitle">Select which AI providers you want to assess your knowledge on</p>
    <div class="provider-buttons">
      <button
        *ngFor="let provider of allProviders"
        class="provider-button"
        [class.selected]="isProviderInFocus(provider.id)"
        (click)="toggleProviderFocus(provider.id)"
      >
        <svg *ngIf="isProviderInFocus(provider.id)" class="check-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M3 8L6 11L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>{{ provider.name }}</span>
      </button>
    </div>
  </div>

  <div class="overall-progress" *ngIf="filteredProviders.length > 0">
    <div class="progress-header">
      <span class="progress-title">Overall Knowledge</span>
      <span class="progress-stats">{{ overallKnownCount }}/{{ overallTotalCount }} terms ({{ overallPercentage }}%)</span>
    </div>
    <div class="progress-bar-container">
      <div class="progress-bar" [style.width.%]="overallPercentage"></div>
    </div>
  </div>

  <div class="providers-grid" *ngIf="filteredProviders.length > 0">
    <div *ngFor="let provider of filteredProviders" class="provider-card">
      <div class="provider-header" (click)="toggleProviderExpanded(provider.id)">
        <div class="provider-title-section">
          <h3 class="provider-name">{{ provider.name }}</h3>
          <span class="knowledge-count">
            {{ getKnownCount(provider) }}/{{ provider.terms.length }} terms known
          </span>
        </div>
        <span class="expand-icon" [class.expanded]="provider.expanded">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </div>

      <div class="provider-content" [class.collapsed]="!provider.expanded">
        <div class="provider-progress">
          <div class="progress-bar-container small">
            <div class="progress-bar" [style.width.%]="getKnowledgePercentage(provider)"></div>
          </div>
        </div>

        <div class="select-all-container">
          <label class="checkbox-label select-all">
            <input
              type="checkbox"
              [checked]="isAllSelected(provider)"
              [indeterminate]="isSomeSelected(provider)"
              (change)="toggleAllInProvider(provider.id, $event)"
            />
            <span class="checkbox-custom"></span>
            <span class="checkbox-text">I know all of these</span>
          </label>
        </div>

        <!-- Level Groups -->
        <div class="level-groups">
          <!-- Beginner Level -->
          <div class="level-group">
            <div class="level-header" (click)="toggleLevelExpanded(provider.id, 'beginner')">
              <div class="level-header-left">
                <span class="level-badge" [style.backgroundColor]="getLevelColor('beginner')">
                  {{ getLevelLabel('beginner') }}
                </span>
                <span class="level-stats">
                  {{ getKnownCountByLevel(provider, 'beginner') }}/{{ getTermsByLevel(provider, 'beginner').length }} known
                </span>
              </div>
              <span class="expand-icon" [class.expanded]="isLevelExpanded(provider.id, 'beginner')">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="none">
                  <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
            <div class="level-content" [class.collapsed]="!isLevelExpanded(provider.id, 'beginner')">
              <div class="terms-list">
                <label *ngFor="let term of getTermsByLevel(provider, 'beginner')" class="checkbox-label">
                  <input
                    type="checkbox"
                    [checked]="term.selected"
                    (change)="toggleTerm(term.id)"
                  />
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">{{ term.term }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Intermediate Level -->
          <div class="level-group">
            <div class="level-header" (click)="toggleLevelExpanded(provider.id, 'intermediate')">
              <div class="level-header-left">
                <span class="level-badge" [style.backgroundColor]="getLevelColor('intermediate')">
                  {{ getLevelLabel('intermediate') }}
                </span>
                <span class="level-stats">
                  {{ getKnownCountByLevel(provider, 'intermediate') }}/{{ getTermsByLevel(provider, 'intermediate').length }} known
                </span>
              </div>
              <span class="expand-icon" [class.expanded]="isLevelExpanded(provider.id, 'intermediate')">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="none">
                  <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
            <div class="level-content" [class.collapsed]="!isLevelExpanded(provider.id, 'intermediate')">
              <div class="terms-list">
                <label *ngFor="let term of getTermsByLevel(provider, 'intermediate')" class="checkbox-label">
                  <input
                    type="checkbox"
                    [checked]="term.selected"
                    (change)="toggleTerm(term.id)"
                  />
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">{{ term.term }}</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Advanced Level -->
          <div class="level-group">
            <div class="level-header" (click)="toggleLevelExpanded(provider.id, 'advanced')">
              <div class="level-header-left">
                <span class="level-badge" [style.backgroundColor]="getLevelColor('advanced')">
                  {{ getLevelLabel('advanced') }}
                </span>
                <span class="level-stats">
                  {{ getKnownCountByLevel(provider, 'advanced') }}/{{ getTermsByLevel(provider, 'advanced').length }} known
                </span>
              </div>
              <span class="expand-icon" [class.expanded]="isLevelExpanded(provider.id, 'advanced')">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="none">
                  <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
            <div class="level-content" [class.collapsed]="!isLevelExpanded(provider.id, 'advanced')">
              <div class="terms-list">
                <label *ngFor="let term of getTermsByLevel(provider, 'advanced')" class="checkbox-label">
                  <input
                    type="checkbox"
                    [checked]="term.selected"
                    (change)="toggleTerm(term.id)"
                  />
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">{{ term.term }}</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="no-providers-selected" *ngIf="filteredProviders.length === 0">
    <svg class="empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none">
      <circle cx="32" cy="32" r="24" stroke="currentColor" stroke-width="2" opacity="0.3"/>
      <path d="M20 32L28 40L44 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" opacity="0.3"/>
    </svg>
    <h3>Choose Your AI Platforms</h3>
    <p>Select one or more AI providers above to begin your knowledge assessment. Click the buttons to choose which platforms you want to evaluate.</p>
  </div>
</div>
